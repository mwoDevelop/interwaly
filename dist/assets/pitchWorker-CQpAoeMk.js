(function(){"use strict";const f=(l,s)=>{let n;const t=new Float32Array(l.length/2);for(let e=0;e<t.length;e++)t[e]=0;for(let e=1;e<t.length;e++)for(let r=0;r<t.length;r++){const c=l[r]-l[r+e];t[e]+=c*c}t[0]=1;let o=0;for(let e=1;e<t.length;e++)o+=t[e],t[e]*=e/o;for(n=2;n<t.length;n++)if(t[n]<.1){for(;n+1<t.length&&t[n+1]<t[n];)n++;return s/n}return null};self.onmessage=l=>{const s=l.data;if(s.type==="analyze"){const{buffer:a,sampleRate:n}=s.payload,o={type:"result",frequency:f(a,n)};self.postMessage(o)}}})();
